name: Build For Testing
inputs:
  scheme:
    description: Scheme
    required: true
  destination:
    description: Destination
    required: true
  project:
    description: Project directory, relative to the xcode folder
    required: true
description: Build for testing.
runs:
  using: composite
  steps:
  - shell: bash
    working-directory: .
    run: |
      cd xcode

      xcodebuild clean build-for-testing \
        -allowProvisioningUpdates \
        -allowProvisioningDeviceRegistration \
        -project '${{ inputs.project }}' \
        -scheme '${{ inputs.scheme }}' \
        -destination '${{ inputs.destination }}' \
        -resultBundlePath BuildResults.xcresult \
        CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO
